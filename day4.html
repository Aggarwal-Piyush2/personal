<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Day IV | Hold Me Close</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,400;1,700&family=Montserrat:wght@300;500&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --velvet: #1a0505; 
            --deep-red: #4a0404;
            --gold-glow: #c5a059;
            --rose: #ff4d6d; 
        }
        
        body, html { 
            margin: 0; padding: 0; 
            background: radial-gradient(circle at center, var(--deep-red) 0%, var(--velvet) 100%);
            font-family: 'Montserrat', sans-serif; height: 100vh;
            overflow: hidden; -webkit-tap-highlight-color: transparent;
        }

        /* SYDNEY TIME LOCK */
        #time-lock {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: #000; z-index: 2000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: var(--gold-glow); text-align: center;
        }

        #bg-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 20%, rgba(0,0,0,0.8) 100%);
            opacity: 0; transition: opacity 1.5s; z-index: 1; pointer-events: none;
        }

        .container {
            position: relative; z-index: 10; height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        #hint {
            font-family: 'Playfair Display', serif; font-size: 1.1rem;
            color: var(--gold-glow); margin-bottom: 20px; font-style: italic;
            text-shadow: 0 0 10px rgba(197, 160, 89, 0.5);
            text-align: center; padding: 0 20px;
        }

        #teddy {
            width: 260px; cursor: pointer;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            filter: drop-shadow(0 0 20px rgba(0,0,0,0.5)) grayscale(1) blur(5px);
            opacity: 0.6;
        }
        #teddy.warm {
            filter: drop-shadow(0 0 25px var(--rose)) grayscale(0) blur(0);
            opacity: 1;
        }

        #whisper-box {
            margin-top: 30px; min-height: 80px; text-align: center;
            padding: 0 40px; color: #ffccd5; font-weight: 300; line-height: 1.6;
            opacity: 0; transition: 0.8s all; letter-spacing: 1px;
        }

        .meter-container {
            position: absolute; bottom: 80px; width: 180px; height: 2px;
            background: rgba(255,255,255,0.1);
        }
        #meter-fill {
            width: 0%; height: 100%; background: var(--rose);
            box-shadow: 0 0 15px var(--rose);
        }

        .hugging { animation: pulse 1.5s infinite ease-in-out; }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }
    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="gallan.mp3" type="audio/mpeg">
    </audio>

    <div id="time-lock">
        <h2 style="font-family:'Playfair Display'; letter-spacing: 3px;">A MOMENT OF PATIENCE...</h2>
        <p id="timer" style="font-size: 0.8rem; letter-spacing: 2px; margin-top: 10px;"></p>
        <p style="margin-top: 20px; color: #444; font-size: 0.7rem;">SaBar ka Fal Teddy hota hai my Darling!</p>
    </div>

    <div id="bg-overlay"></div>

    <div class="container" id="main-content" style="display:none;">
        <div id="hint">He's cold without you. Tap to warm him up...</div>
        <img id="teddy" src="download.png" alt="Teddy">
        <div id="whisper-box"></div>
        <div class="meter-container"><div id="meter-fill"></div></div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const UNLOCK_DATE = "2026-02-01T00:00:00"; // Feb 10th Sydney Time
        const MUSIC_START_TIME = 57; // Set the start time in SECONDS here

        const music = document.getElementById('bg-music');
        const teddy = document.getElementById('teddy');
        const hint = document.getElementById('hint');
        const fill = document.getElementById('meter-fill');
        const whisper = document.getElementById('whisper-box');
        const overlay = document.getElementById('bg-overlay');

        // --- 1. SYDNEY TIME LOCK ---
        const timerInterval = setInterval(() => {
            const now = new Date();
            const sydneyTime = new Date(now.toLocaleString("en-US", {timeZone: "Australia/Sydney"}));
            const diff = new Date(UNLOCK_DATE) - sydneyTime;

            if (diff <= 0) {
                document.getElementById('time-lock').style.display = 'none';
                document.getElementById('main-content').style.display = 'flex';
                clearInterval(timerInterval);
            } else {
                const h = Math.floor(diff / 3600000);
                const m = Math.floor((diff % 3600000) / 600000);
                const s = Math.floor((diff % 60000) / 1000);
                document.getElementById('timer').innerHTML = `Unlocks in Sydney:<br>${h}h ${m}m ${s}s`;
            }
        }, 1000);

        // --- 2. OBSTACLE & MUSIC TRIGGER ---
        let tapCount = 0;
        let isAwake = false;

        teddy.addEventListener('click', () => {
            // Start music on first tap at your custom start time
            if (tapCount === 0) {
                music.currentTime = MUSIC_START_TIME; 
                music.play().catch(e => console.log("Play blocked"));
            }

            if (isAwake) return;
            tapCount++;
            teddy.style.transform = `scale(${1 + tapCount * 0.03}) rotate(${tapCount % 2 === 0 ? '3deg' : '-3deg'})`;
            
            if (tapCount >= 6) {
                isAwake = true;
                teddy.classList.add('warm');
                teddy.style.transform = "scale(1)";
                hint.innerHTML = "He's warm now. Now hold him close...";
                hint.style.color = "var(--rose)";
            }
        });

        // --- 3. HUG LOGIC ---
        let progress = 0;
        let holdTimer;

        const messages = [
            "You're the only one I want to wake up to... and stay in bed with. ðŸ˜",
            "This teddy is soft, but you know Iâ€™m not always this gentle.",
            "I'm sending this bear to guard you... because I'm not there to hold those curves myself.",
            "Every time you squeeze this, imagine it's me. And imagine what I'd be doing to you.",
            "I love your heart, but I'm also really craving your body right now.",
            "Counting down the days until I don't need a virtual hug to feel you against me."
        ];

        function startHold(e) {
            if (!isAwake) return;
            e.preventDefault();
            teddy.classList.add('hugging');
            overlay.style.opacity = "1";
            whisper.style.opacity = "0";
            
            holdTimer = setInterval(() => {
                progress += 1.5;
                fill.style.width = progress + "%";
                if (progress >= 100) {
                    clearInterval(holdTimer);
                    showWhisper();
                }
            }, 30);
        }

        function endHold() {
            teddy.classList.remove('hugging');
            overlay.style.opacity = "0";
            clearInterval(holdTimer);
            if (progress < 100) {
                progress = 0;
                fill.style.width = "0%";
            }
        }

        function showWhisper() {
            const randomMsg = messages[Math.floor(Math.random() * messages.length)];
            whisper.innerHTML = `<i>"${randomMsg}"</i>`;
            whisper.style.opacity = "1";
            setTimeout(() => { progress = 0; fill.style.width = "0%"; }, 1000);
        }

        teddy.addEventListener('touchstart', startHold);
        teddy.addEventListener('touchend', endHold);
        teddy.addEventListener('mousedown', startHold);
        teddy.addEventListener('mouseup', endHold);
    </script>
</body>
</html>