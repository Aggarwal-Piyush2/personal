<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Valentine Vault | Sydney Entry</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,400;1,700&family=Montserrat:wght@200;400&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #eeba30; --crimson: #740001; --deep-red: #2c0b0e; }
        
        body, html { 
            margin: 0; padding: 0; background: #000; color: white;
            font-family: 'Montserrat', sans-serif; height: 100vh;
            overflow: hidden; display: flex; align-items: center; justify-content: center;
        }

        .bg-glow {
            position: absolute; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, var(--deep-red) 0%, #0a0a0a 100%);
            z-index: -1; animation: pulse 8s infinite alternate;
        }
        @keyframes pulse { 0% { opacity: 0.6; } 100% { opacity: 1; } }

        /* Hidden YouTube Player */
        #yt-player { position: absolute; top: -9999px; left: -9999px; visibility: hidden; pointer-events: none; }

        /* Lockdown Screen */
        #lockdown-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999; display: flex; flex-direction: column;
            align-items: center; justify-content: center; text-align: center;
        }

        .lock-icon { font-size: 5rem; color: var(--gold); margin-bottom: 20px; filter: drop-shadow(0 0 10px var(--gold)); }

        /* Music Toggle Button */
        .music-toggle {
            position: fixed; bottom: 20px; right: 20px; z-index: 10000;
            background: rgba(0,0,0,0.6); border: 1px solid var(--gold);
            color: var(--gold); border-radius: 50px; padding: 10px 15px;
            font-size: 0.7rem; cursor: pointer; display: none;
        }

        /* Main Content */
        .main-content { text-align: center; z-index: 10; display: none; }
        
        h1 {
            font-family: 'Playfair Display', serif; font-size: 3rem;
            letter-spacing: 8px; margin-bottom: 5px; font-style: italic;
            color: var(--gold); text-shadow: 0 0 20px rgba(238, 186, 48, 0.4);
        }

        .subtitle { opacity: 0.7; font-size: 0.7rem; letter-spacing: 4px; margin-bottom: 40px; text-transform: uppercase; }

        .vault-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;
            max-width: 400px; margin: 0 auto; perspective: 1000px;
            justify-items: center; justify-content: center; 
        }

        .day-card {
            width: 75px; height: 100px; background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(238, 186, 48, 0.2); border-radius: 8px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-decoration: none; color: white; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative; overflow: hidden;
        }

        .day-card span { font-family: 'Playfair Display', serif; font-size: 1.5rem; }
        .day-card small { font-size: 0.5rem; letter-spacing: 1px; margin-top: 5px; opacity: 0.5; }

        .unlocked:hover {
            background: rgba(238, 186, 48, 0.1); border-color: var(--gold);
            transform: translateY(-10px) scale(1.05); box-shadow: 0 10px 30px rgba(238, 186, 48, 0.2);
        }

        .locked { opacity: 0.3; cursor: not-allowed; border-color: #333; }
        .locked::after { content: 'ðŸ”’'; position: absolute; font-size: 0.8rem; bottom: 10px; opacity: 0.5; }

        @media (max-width: 400px) { .vault-grid { grid-template-columns: repeat(3, 1fr); } }
    </style>
</head>
<body>

    <div class="bg-glow"></div>

    <div id="yt-player"></div>
    <button id="musicControl" class="music-toggle" onclick="toggleMusic()">ðŸ”Š MUSIC ON</button>

    <div id="lockdown-screen">
        <div class="lock-icon">ðŸ”’</div>
        <h2 style="font-family: 'Playfair Display'; italic;">The Vault is Sealed</h2>
        <p id="countdown-text" style="letter-spacing: 2px; font-size: 0.8rem; color: var(--gold);"></p>
        <p style="font-size: 0.6rem; opacity: 0.5; letter-spacing: 2px;">TRUST ME, IT'S WORTH THE WAIT!!!</p>
    </div>

    <div class="main-content" id="vault-content">
        <h1>The Vault</h1>
        <p class="subtitle">EIGHT DAYS â€¢ EIGHT SECRETS</p>
        <div class="vault-grid" id="grid"></div>
        <p id="challenge-hint" style="margin-top: 40px; font-size: 0.7rem; color: var(--gold); italic; height: 20px;"></p>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>

    <script>
        let player;
        let isMuted = false;
        let musicStarted = false;

        // --- YOUTUBE CONFIG ---
        const START_SECOND = 18;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('yt-player', {
                height: '0',
                width: '0',
                videoId: '2eliQ_KR8yA', // <--- REPLACE WITH YOUR YOUTUBE ID
                playerVars: {
                    'autoplay': 1,
                    'loop': 1,
                    'playlist': '2eliQ_KR8yA', // Required for looping
                    'controls': 0,
                    'showinfo': 0,
                    'modestbranding': 1
                },
               events: {
                 'onReady': onPlayerReady,
                 'onStateChange': function(event) {
                     // If the video ends (0), seek back to your start time and play
                   if (event.data === YT.PlayerState.ENDED) {
                       player.seekTo(18); 
                       player.playVideo();
                  }
              }
        }
            });
        }

        function onPlayerReady(event) {
            // Attempt autoplay (might be blocked)
            event.target.playVideo();
        }

        function onPlayerStateChange(event) {
        // Ensures if it stops for some reason, we know
        }

        // FORCE START ON FIRST CLICK
        document.body.addEventListener('click', function() {
            if (!musicStarted && player) {
                player.playVideo();
                musicStarted = true;
                console.log("Music Started via Interaction");
            }
        }, { once: true }); // Only runs on the very first click


        function toggleMusic() {
            const btn = document.getElementById('musicControl');
            if (isMuted) {
                player.unMute();
                player.playVideo();
                btn.innerText = "ðŸ”Š MUSIC ON";
                isMuted = false;
            } else {
                player.mute();
                btn.innerText = "ðŸ”‡ MUSIC OFF";
                isMuted = true;
            }
        }

        // --- SYDNEY TIME CONFIGURATION ---
        const TARGET_ISO = "2026-02-06T00:00:00+11:00"; 
        const EVENT_START_DATE = new Date(TARGET_ISO);  

        function checkLockdown() {
            const now = new Date();
            const lockdownScreen = document.getElementById('lockdown-screen');
            const vaultContent = document.getElementById('vault-content');
            const countdownText = document.getElementById('countdown-text');

            if (now >= EVENT_START_DATE) {
                lockdownScreen.style.display = 'none';
                vaultContent.style.display = 'block';
                document.getElementById('musicControl').style.display = 'block';
                
                // Try to start music on first vault view interaction
                if (player && player.getPlayerState() !== 1) {
                    player.playVideo();
                }

                renderVault();
            } else {
                const diff = EVENT_START_DATE - now;
                const days = Math.floor(diff / 86400000);
                const hours = Math.floor((diff / 3600000) % 24);
                const mins = Math.floor((diff / 60000) % 60);
                const secs = Math.floor((diff / 1000) % 60);
                countdownText.innerText = `${days}D : ${hours}H : ${mins}M : ${secs}S`;
            }
        }

        const challenges = [
            { id: 1, title: "I", hint: "Unlocks Feb 7", link: "day1.html" },
            { id: 2, title: "II", hint: "Unlocks Feb 8", link: "day2.html" },
            { id: 3, title: "III", hint: "Unlocks Feb 9", link: "day3.html" },
            { id: 4, title: "IV", hint: "Unlocks Feb 10", link: "day4.html" },
            { id: 5, title: "V", hint: "Unlocks Feb 11", link: "day5.html" },
            { id: 6, title: "VI", hint: "Unlocks Feb 12", link: "day6.html" },
            { id: 7, title: "VII", hint: "Unlocks Feb 13", link: "day7.html" },
            { id: 8, title: "VIII", hint: "Unlocks Feb 14", link: "day8.html" }
        ];

        function renderVault() {
            const grid = document.getElementById('grid');
            if(grid.children.length > 0) return; 
            
            const now = new Date();

            challenges.forEach((day, index) => {
                const unlockDate = new Date(EVENT_START_DATE);
                unlockDate.setDate(EVENT_START_DATE.getDate() + (index + 1));

                const card = document.createElement('a');
                const isUnlocked = now >= unlockDate;

                if (isUnlocked) {
                    card.className = 'day-card unlocked';
                    card.href = day.link;
                    card.onmouseover = () => { document.getElementById('challenge-hint').innerText = "Click to enter secret " + day.id; };
                    card.onmouseleave = () => { document.getElementById('challenge-hint').innerText = ""; };
                } else {
                    card.className = 'day-card locked';
                    card.onclick = (e) => { 
                        e.preventDefault(); 
                        alert(`This secret unlocks Sydney midnight on ${unlockDate.toLocaleDateString('en-AU')}`); 
                    };
                }

                card.innerHTML = `<span>${day.title}</span><small>DAY ${day.id}</small>`;
                grid.appendChild(card);
            });
        }

        setInterval(checkLockdown, 1000);
        checkLockdown();
    </script>
</body>
</html>