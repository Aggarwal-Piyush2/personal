<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Day II | The Final Destination</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,400;1,700&family=Montserrat:wght@200;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root { --gold: #c5a059; --velvet: #1a0505; --diamond: #f0f8ff; }
        
        body, html { 
            margin: 0; padding: 0; background: #000; color: white; 
            font-family: 'Montserrat', sans-serif; height: 1200vh;
            overflow-x: hidden; scroll-behavior: smooth;
            -webkit-tap-highlight-color: transparent; /* Clean iPhone taps */
        }

        /* 1. CINEMATIC OVERLAY */
        #light-flare {
            position: fixed; top: 50%; left: 50%; width: 10vw; height: 10vw;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 70%);
            transform: translate(-50%, -50%); z-index: 5; opacity: 0; pointer-events: none;
        }

        /* 2. THE 3D BOX SCENE (Mobile Adjusted) */
        .scene {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            display: flex; justify-content: center; align-items: center;
            perspective: 1500px; z-index: 2;
        }

        .box-wrapper {
            position: relative; width: 250px; height: 250px;
            transform-style: preserve-3d;
            transform: rotateX(-15deg) rotateY(15deg);
        }

        .lid {
            position: absolute; bottom: 100px; width: 180px; height: 100px;
            background: #4a0505; border: 1px solid #2a0000;
            left: 50%; transform-origin: bottom;
            transform: translateX(-50%) rotateX(0deg);
            z-index: 10;
        }

        .base {
            position: absolute; bottom: 0; width: 180px; height: 100px;
            background: #2a0000; border: 1px solid #1a0000;
            left: 50%; transform: translateX(-50%);
            box-shadow: 0 20px 50px rgba(0,0,0,0.9);
        }

        #diamond-ring {
            position: absolute; bottom: 110px; left: 50%; width: 90px;
            transform: translateX(-50%) scale(0); opacity: 0;
            filter: drop-shadow(0 0 20px var(--diamond));
            transition: transform 0.1s linear; z-index: 5;
        }

        /* 3. NARRATIVE */
        .text-slide {
            position: relative; z-index: 10; height: 250vh;
            display: flex; align-items: center; justify-content: center;
            padding: 0 30px;
        }
        .message {
            font-family: 'Playfair Display', serif; font-size: 1.8rem;
            text-align: center; color: var(--gold); font-style: italic;
            opacity: 0; transform: translateY(30px); transition: 1s all;
            max-width: 100%; line-height: 1.6;
        }

        /* 4. THE QUESTION CARD */
        .final-reveal {
            position: relative; z-index: 100; background: #000;
            min-height: 100vh; display: flex; align-items: center; justify-content: center;
        }
        .card {
            background: #0a0a0a; border: 1px solid var(--gold);
            padding: 50px 30px; text-align: center; width: 85%;
            box-shadow: 0 0 100px rgba(197, 160, 89, 0.1);
        }

        .btn-group {
            display: flex; flex-direction: column; align-items: center; gap: 20px; 
            margin-top: 30px; position: relative; width: 100%;
        }
        
        button {
            padding: 18px 0; width: 100%; max-width: 250px;
            font-family: 'Montserrat'; text-transform: uppercase;
            letter-spacing: 2px; cursor: pointer; border-radius: 0;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-size: 1rem;
        }
        
        .btn-yes { background: var(--gold); border: none; color: black; font-weight: 600; z-index: 101; }
        .btn-no { background: transparent; border: 1px solid #444; color: #444; z-index: 100; }

        canvas { position: fixed; top: 0; left: 0; z-index: 1; pointer-events: none; }
        
        /* Success Overlay */
        #success-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white; z-index: 2000; display: none;
            justify-content: center; align-items: center;
            flex-direction: column; color: black;
        }
    </style>
</head>
<body>

    <div id="success-overlay">
        <h1 style="font-family: 'Playfair Display'; font-size: 2.5rem;">YES! ‚ù§Ô∏è</h1>
        <p>I love you forever.</p>
    </div>

    <canvas id="particles"></canvas>
    <div id="light-flare"></div>

    <div class="scene">
        <div class="box-wrapper" id="box">
            <div class="lid" id="lid-hinge"></div>
            <img id="diamond-ring" src="https://www.pngmart.com/files/1/Diamond-Ring-PNG-Transparent-Image.png" alt="Diamond Ring">
            <div class="base"></div>
        </div>
    </div>

    <div class="text-slide"><div class="message">Yesterday, we crossed 15,000 kilometers...</div></div>
    <div class="text-slide"><div class="message">But my heart always stayed in one place.</div></div>
    <div class="text-slide"><div class="message">With you.</div></div>
    <div class="text-slide"><div class="message">So today, I want to settle the distance forever.</div></div>

    <div class="final-reveal">
        <div class="card">
            <h1 style="font-family: 'Playfair Display'; font-size: 2.2rem; color: var(--gold); margin-bottom: 10px;">The Question</h1>
            <p style="color: #888; letter-spacing: 2px; font-size: 0.8rem;">Will you be my forever destination?</p>
            
            <div class="btn-group">
                <button class="btn-yes" id="yesBtn" onclick="celebrate()">YES</button>
                <button class="btn-no" id="noBtn" onclick="handleNo()">NO</button>
            </div>
        </div>
    </div>

    <script>
        let noCount = 0;

        // 1. SCROLL ENGINE
        window.addEventListener('scroll', () => {
            const scrollTotal = document.body.offsetHeight - window.innerHeight;
            const scroll = window.scrollY / scrollTotal;
            
            const lid = document.getElementById('lid-hinge');
            const ring = document.getElementById('diamond-ring');
            const flare = document.getElementById('light-flare');
            
            if (scroll > 0.4 && scroll < 0.8) {
                const p = (scroll - 0.4) / 0.3;
                lid.style.transform = `translateX(-50%) rotateX(${-p * 115}deg)`;
                ring.style.opacity = p;
                ring.style.transform = `translateX(-50%) translateY(${-p * 120}px) scale(${p * 1.5}) rotate(${scroll * 400}deg)`;
                flare.style.opacity = p * 0.5;
                flare.style.width = (p * 80) + "vw"; flare.style.height = (p * 80) + "vw";
            }

            const msgs = document.querySelectorAll('.message');
            msgs.forEach((m) => {
                const rect = m.parentElement.getBoundingClientRect();
                if (rect.top < window.innerHeight * 0.7 && rect.bottom > 0) {
                    m.style.opacity = 1; m.style.transform = "translateY(0)";
                } else { m.style.opacity = 0; }
            });
        });

        // 2. IPHONE TOUCH OPTIMIZED "NO" LOGIC
        function handleNo() {
            noCount++;
            const noBtn = document.getElementById('noBtn');
            const yesBtn = document.getElementById('yesBtn');
            
            // Move the button randomly
            const x = Math.random() * (window.innerWidth - 150) - (window.innerWidth/2 - 75);
            const y = Math.random() * (window.innerHeight - 150) - (window.innerHeight/2 - 75);
            
            noBtn.style.position = 'fixed';
            noBtn.style.left = '50%';
            noBtn.style.top = '50%';
            noBtn.style.transform = `translate(${x}px, ${y}px) scale(${Math.max(0.5, 1 - noCount*0.1)})`;
            
            // Make "Yes" grow to encourage her
            yesBtn.style.transform = `scale(${1 + noCount * 0.15})`;
            
            if(noCount === 1) noBtn.innerHTML = "Are you sure?";
            if(noCount === 3) noBtn.innerHTML = "Wait... why?";
            if(noCount > 5) noBtn.innerHTML = "Nice try! üòâ";
        }

        // 3. SUCCESS SEQUENCE
        function celebrate() {
            const overlay = document.getElementById('success-overlay');
            overlay.style.display = 'flex';
            
            // Simple Haptic-like visual (white flash)
            setTimeout(() => {
                window.location.href = "https://www.youtube.com/watch?v=dQw4w9WgXcQ"; 
            }, 1500);
        }

        // 4. BACKGROUND DUST
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const pts = [];
        for(let i=0; i<100; i++) pts.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, s: Math.random()*2, o: Math.random() });

        function draw() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            pts.forEach(p => {
                ctx.fillStyle = `rgba(240, 248, 255, ${p.o})`;
                ctx.beginPath(); ctx.arc(p.x, p.y, p.s, 0, Math.PI*2); ctx.fill();
                p.y -= 0.3; if(p.y < 0) p.y = canvas.height;
            });
            requestAnimationFrame(draw);
        }
        draw();
    </script>
</body>
</html>